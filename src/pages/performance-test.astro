---
/* Performance optimized test page */
import MainLayout from '../layouts/MainLayout.astro';
import Navigation from '../components/Navigation.astro';
import Footer from '../components/Footer.astro';
import { Image } from 'astro:assets';

// Site is now statically rendered
export const prerender = true;
---

<MainLayout title="Digital Visibility - Performance Test">
  <!-- Only essential metadata -->
  <link rel="canonical" href="https://digitalvisibility.com/performance-test/" slot="head">
  
  <!-- Preload hero images for faster LCP -->
  <link 
    rel="preload" 
    href="/digital-visibility-square-mobile.webp" 
    as="image"
    media="(max-width: 640px)"
    fetchpriority="high"
    slot="head"
  />
  <link 
    rel="preload" 
    href="/digital-visibility-square-tablet.webp" 
    as="image"
    media="(min-width: 641px) and (max-width: 1024px)"
    fetchpriority="high"
    slot="head"
  />
  <link 
    rel="preload" 
    href="/digital-visibility-square-desktop.webp" 
    as="image"
    media="(min-width: 1025px)"
    fetchpriority="high"
    slot="head"
  />
  
  <!-- Defer non-critical scripts -->
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer slot="head"></script>
  
  <!-- Preconnect to external domains -->
  <link rel="preconnect" href="https://challenges.cloudflare.com" crossorigin slot="head">
  <link rel="dns-prefetch" href="https://challenges.cloudflare.com" slot="head">
  
  <!-- Inline critical CSS for hero section -->
  <style is:inline slot="head">
    /* Critical CSS for hero section only */
    .hero-section { background-color: white; padding: 3rem 0; }
    @media (min-width: 768px) { .hero-section { padding: 6rem 0; } }
    .hero-container { max-width: 80rem; margin: 0 auto; padding: 0 1rem; }
    @media (min-width: 640px) { .hero-container { padding: 0 1.5rem; } }
    @media (min-width: 1024px) { .hero-container { padding: 0 2rem; } }
    .hero-flex { display: flex; flex-direction: column; align-items: center; }
    @media (min-width: 768px) { .hero-flex { flex-direction: row; } }
    .hero-content { margin-bottom: 2.5rem; }
    @media (min-width: 768px) { 
      .hero-content { width: 50%; margin-bottom: 0; padding-right: 2.5rem; } 
      .hero-image-wrapper { width: 50%; position: relative; }
    }
    .hero-heading { font-size: 2.25rem; font-weight: 700; color: #1a202c; margin-bottom: 1.5rem; line-height: 1.25; }
    @media (min-width: 768px) { .hero-heading { font-size: 3rem; } }
    .hero-text { font-size: 1.25rem; color: #4a5568; margin-bottom: 2rem; }
    .hero-image { margin-top: -384px; display: block; border-radius: 0.5rem; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); max-width: 90%; margin-left: auto; overflow: hidden; }
    .hero-card { position: absolute; bottom: -84px; right: -10px; transition: all 0.3s; }
    .hero-card:hover { transform: translateY(-5px); box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); }
  </style>
  
  <Navigation slot="nav" />
  
  <!-- Hero Section - With critical CSS classes -->
  <section class="hero-section">
    <div class="hero-container">
      <div class="hero-flex">
        <div class="hero-content">
          <h1 class="hero-heading">
            Transform Your Digital Presence: Human Powered Digital Solutions, Accelerated With AI
          </h1>
          <p class="hero-text">
            We've ranked #1, #2, and #3 for our main niche in just ONE week using our proven AI optimization techniques SEO+AEO+GEO.
            Let us do the same for your business.
          </p>
          <div class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
            <a href="#services-overview" class="bg-blue-600 hover:bg-blue-700 text-white font-medium px-6 py-3 rounded-md inline-flex items-center transition-colors">
              Explore Services
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
              </svg>
            </a>
            <a href="#free-website" class="border border-blue-600 text-blue-600 hover:bg-blue-50 font-medium px-6 py-3 rounded-md transition-colors">
              Free Website Offer
            </a>
          </div>
        </div>
        <div class="hero-image-wrapper">
          <!-- Optimized responsive image using Astro Image component -->
          <picture class="hero-image mt-[-384px]">
            <!-- Mobile image (up to 640px) -->
            <source
              media="(max-width: 640px)"
              srcset="/digital-visibility-square-mobile.webp"
              width="400"
              height="400"
            />
            <!-- Tablet image (641px - 1024px) -->
            <source
              media="(min-width: 641px) and (max-width: 1024px)"
              srcset="/digital-visibility-square-tablet.webp"
              width="600"
              height="600"
            />
            <!-- Desktop image (1025px and above) -->
            <Image
              src="/digital-visibility-square-desktop.webp"
              width={800}
              height={800}
              alt="AI Business Optimization"
              class="rounded-lg shadow-xl max-w-full"
              loading="eager"
              fetchpriority="high"
            />
          </picture>
          
          <!-- Proven Results Card - Linked to Bio Page -->
          <a href="/about/darran-goulding/" class="hero-card -bottom-84 right-[-10px]">
            <div class="bg-blue-50 p-6 rounded-md shadow-lg max-w-[300px] transition-colors duration-300 group-hover:bg-blue-100">
              <div class="flex items-center text-blue-500 mb-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" viewBox="0 0 20 20" fill="currentColor">
                  <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1h-2a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1h-2a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z" />
                </svg>
                <span class="font-semibold">Proven Results</span>
              </div>
              <h3 class="text-2xl font-bold text-blue-600 group-hover:text-blue-700">Top 3 Rankings</h3>
              <p class="text-md text-gray-600">in just 1 week</p>
            </div>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Basic Hero Image Explanation -->
  <section class="bg-blue-50 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        <h2 class="text-3xl font-bold text-gray-900">Performance Test Page</h2>
        <p class="mt-4 text-lg text-gray-600">
          This page has been optimized for performance testing with minimal content.
          It maintains the exact same hero image positioning (mt-[-384px]) and card placement (-bottom-84)
          that you specified as important in your design.
        </p>
      </div>
    </div>
  </section>

  <Footer slot="footer" />
</MainLayout>
