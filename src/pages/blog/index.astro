---
import MainLayout from '../../layouts/MainLayout.astro';
import Navigation from '../../components/Navigation.astro';
import Footer from '../../components/Footer.astro';
import { blogPosts, categoryInfo, getAllCategories, getFeaturedPosts } from '../../data/blogPosts.js';

// Get all posts and categories
const allPosts = blogPosts;
const featuredPosts = getFeaturedPosts();
const categories = [
  { name: 'All', slug: 'all', count: allPosts.length },
  ...getAllCategories()
];

// SEO Meta Data
const meta = {
  title: "Digital Visibility Blog | Expert SEO, AI & Digital Marketing Insights",
  description: "Discover expert insights on SEO, AI automation, web design, and digital marketing strategies. Stay ahead with Digital Visibility's latest industry trends and proven tactics.",
  keywords: "Digital Visibility blog, SEO insights, AI automation, web design trends, digital marketing strategies, Swansea digital agency, UK business insights",
  canonical: "https://digitalvisibility.com/blog/",
  ogTitle: "Digital Visibility Blog | Expert Digital Marketing Insights",
  ogDescription: "Stay ahead with expert insights on SEO, AI automation, and digital marketing from Digital Visibility's team of specialists.",
  ogImage: "https://digitalvisibility.com/digital visibility blog background.webp"
};
---

<MainLayout title={meta.title} description={meta.description}>
  <!-- SEO and Canonical Tags -->
  <link rel="canonical" href={meta.canonical} slot="head">
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" slot="head">
  <meta name="keywords" content={meta.keywords} slot="head">
  
  <!-- Geographic Meta Tags -->
  <meta name="geo.region" content="GB-SWA" slot="head">
  <meta name="geo.placename" content="Swansea" slot="head">
  <meta name="geo.position" content="51.6399;-3.8936" slot="head">
  <meta name="ICBM" content="51.6399, -3.8936" slot="head">
  
  <!-- Open Graph Tags -->
  <meta property="og:locale" content="en_GB" slot="head">
  <meta property="og:type" content="website" slot="head">
  <meta property="og:title" content={meta.ogTitle} slot="head">
  <meta property="og:description" content={meta.ogDescription} slot="head">
  <meta property="og:url" content={meta.canonical} slot="head">
  <meta property="og:site_name" content="Digital Visibility" slot="head">
  <meta property="og:image" content={meta.ogImage} slot="head">
  
  <!-- Twitter Tags -->
  <meta name="twitter:card" content="summary_large_image" slot="head">
  <meta name="twitter:site" content="@DigitalVisiUK" slot="head">
  <meta name="twitter:creator" content="@DigitalVisiUK" slot="head">
  <meta name="twitter:title" content={meta.ogTitle} slot="head">
  <meta name="twitter:description" content={meta.ogDescription} slot="head">
  <meta name="twitter:image" content={meta.ogImage} slot="head">

  <Navigation slot="nav" />
  
  <!-- Blog Hero Section -->
  <section class="py-20 bg-gradient-to-r from-blue-600 to-blue-800 text-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Breadcrumb -->
      <nav class="mb-8">
        <ol class="flex items-center space-x-2 text-sm">
          <li><a href="/" class="hover:text-blue-200">Home</a></li>
          <li><span class="text-blue-300">›</span></li>
          <li class="text-blue-200">Blog</li>
        </ol>
      </nav>
      
      <div class="text-center">
        <h1 class="text-5xl md:text-6xl font-bold mb-6">Digital Insights</h1>
        <p class="text-xl opacity-90 max-w-3xl mx-auto mb-8">
          Expert insights on SEO, AI automation, web design, and digital marketing strategies to help your business thrive in the digital landscape.
        </p>
        <div class="flex justify-center space-x-4">
          <span class="bg-white bg-opacity-20 px-4 py-2 rounded-full text-sm">
            {allPosts.length} Articles
          </span>
          <span class="bg-white bg-opacity-20 px-4 py-2 rounded-full text-sm">
            {categories.length - 1} Categories
          </span>
        </div>
      </div>
    </div>
  </section>

  <!-- Category Navigation -->
  <section class="bg-gray-50 border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex overflow-x-auto py-4 scrollbar-hide">
        <nav class="flex space-x-4 min-w-full">
          {categories.map((category) => (
            <a 
              href={category.slug === 'all' ? '/blog/' : `/blog/category/${category.slug}/`}
              class={`px-4 py-2 text-sm font-medium rounded-md transition-colors whitespace-nowrap ${
                category.slug === 'all' 
                ? 'bg-blue-600 text-white' 
                : 'bg-white text-gray-700 hover:bg-gray-100'
              }`}
            >
              {category.name} ({category.count})
            </a>
          ))}
        </nav>
      </div>
    </div>
  </section>

  <!-- Featured Posts Section -->
  {featuredPosts.length > 0 && (
    <section class="py-12 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">Featured Articles</h2>
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
          {featuredPosts.map((post) => (
            <article class="bg-white rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow">
              <div class="relative">
                <a href={`/blog/${post.slug}/`}>
                  <img 
                    src={post.image} 
                    alt={post.alt}
                    class="w-full h-48 object-cover"
                    loading="lazy"
                  />
                  <div class="absolute top-4 left-4">
                    <span class="bg-blue-600 text-white text-xs px-3 py-1 rounded-full font-medium">
                      Featured
                    </span>
                  </div>
                </a>
              </div>
              <div class="p-6">
                <div class="flex items-center mb-4">
                  <a 
                    href={`/blog/category/${post.categorySlug}/`}
                    class="text-sm font-medium text-blue-600 hover:text-blue-800"
                  >
                    {post.category}
                  </a>
                  <span class="mx-2 text-gray-300">•</span>
                  <span class="text-sm text-gray-600">{post.date}</span>
                </div>
                <a href={`/blog/${post.slug}/`}>
                  <h3 class="text-lg font-bold text-gray-900 mb-2 hover:text-blue-600 transition-colors">
                    {post.title}
                  </h3>
                </a>
                <p class="text-gray-700 mb-4 text-sm">
                  {post.excerpt}
                </p>
                <div class="flex items-center">
                  <img 
                    src={post.authorImage}
                    alt={post.author} 
                    class="w-8 h-8 rounded-full mr-2 object-cover"
                  />
                  <span class="text-xs font-medium text-gray-900">{post.author}</span>
                </div>
              </div>
            </article>
          ))}
        </div>
      </div>
    </section>
  )}

  <!-- All Posts Section -->
  <section class="py-12 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-3xl font-bold text-gray-900 mb-8 text-center">All Articles</h2>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {allPosts.map((post) => (
          <article class="bg-white rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-shadow">
            <div class="relative">
              <a href={`/blog/${post.slug}/`}>
                <img 
                  src={post.image} 
                  alt={post.alt}
                  class="w-full h-48 object-cover"
                  loading="lazy"
                />
                {post.featured && (
                  <div class="absolute top-4 left-4">
                    <span class="bg-blue-600 text-white text-xs px-3 py-1 rounded-full font-medium">
                      Featured
                    </span>
                  </div>
                )}
              </a>
            </div>
            <div class="p-6">
              <div class="flex items-center mb-4">
                <a 
                  href={`/blog/category/${post.categorySlug}/`}
                  class="text-sm font-medium text-blue-600 hover:text-blue-800"
                >
                  {post.category}
                </a>
                <span class="mx-2 text-gray-300">•</span>
                <span class="text-sm text-gray-600">{post.date}</span>
              </div>
              <a href={`/blog/${post.slug}/`}>
                <h3 class="text-lg font-bold text-gray-900 mb-2 hover:text-blue-600 transition-colors">
                  {post.title}
                </h3>
              </a>
              <p class="text-gray-700 mb-4 text-sm">
                {post.excerpt}
              </p>
              <div class="flex items-center">
                <img 
                  src={post.authorImage}
                  alt={post.author} 
                  class="w-8 h-8 rounded-full mr-2 object-cover"
                />
                <span class="text-xs font-medium text-gray-900">{post.author}</span>
              </div>
            </div>
          </article>
        ))}
      </div>
    </div>
  </section>

  <!-- Newsletter Signup -->
  <section class="py-12 bg-gradient-to-r from-blue-600 to-blue-800 text-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-3xl font-bold mb-4">Stay Updated</h2>
      <p class="text-lg opacity-90 mb-6 max-w-2xl mx-auto">
        Get the latest insights on SEO, AI automation, and digital marketing delivered to your inbox.
      </p>
      <div class="flex flex-col sm:flex-row justify-center gap-4">
        <a 
          href="/contact/"
          class="bg-white text-blue-800 hover:bg-blue-50 font-medium px-8 py-3 rounded-md transition-colors"
        >
          Get Free Consultation
        </a>
        <a 
          href="/services/"
          class="border border-white text-white hover:bg-white hover:text-blue-800 font-medium px-8 py-3 rounded-md transition-colors"
        >
          View Our Services
        </a>
      </div>
    </div>
  </section>

  <Footer />

  <!-- Schema Markup -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Blog",
      "name": "Digital Visibility Blog",
      "description": "Expert insights on SEO, AI automation, web design, and digital marketing strategies",
      "url": "https://digitalvisibility.com/blog/",
      "publisher": {
        "@type": "Organization",
        "name": "Digital Visibility Limited",
        "logo": {
          "@type": "ImageObject",
          "url": "https://digitalvisibility.com/digital-visibility-logo-f.png"
        }
      },
      "blogPost": allPosts.map((post) => ({
        "@type": "BlogPosting",
        "headline": post.title,
        "description": post.excerpt,
        "url": `https://digitalvisibility.com/blog/${post.slug}/`,
        "author": {
          "@type": "Person",
          "name": post.author
        },
        "datePublished": post.date,
        "image": post.image
      }))
    }
  </script>
</MainLayout>
