---
// Main layout component that will be used across all pages
const { title = "Digital Visibility - AI Powered Business Optimization", meta } = Astro.props;

// Use meta object if provided, otherwise fall back to individual props
const pageTitle = meta?.title || title;
const pageDescription = meta?.description || "Human-powered digital solutions, accelerated with AI. Digital marketing with SEO+AEO+GEO, app development, and physical product design services in Swansea, Wales, and globally.";
const pageKeywords = meta?.keywords || "AI, digital marketing, app development, product design, business optimization";
const pageImage = meta?.image || "/digital-visibility-logo-f.png";
---

<!DOCTYPE html>
<html lang="en">
<!-- Cloudflare Early Hints Support -->
<!-- Early hints preloads -->
<!-- Early hints preconnect -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Cloudflare optimization hints -->
    <meta http-equiv="Cache-Control" content="public, max-age=86400">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="cf-2fa-verify" content="true">

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T7HFBLX1X1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-T7HFBLX1X1');
    </script>

    <!-- Meta Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1075086131348964');
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1075086131348964&ev=PageView&noscript=1"
    alt="Facebook Pixel tracking for Digital Visibility digital marketing services in Swansea Wales"
    /></noscript>
    <!-- End Meta Pixel Code -->

    <!-- Preload critical resources for better LCP -->
    <!-- Removed global.css preload reference -->
    <link rel="preload" href="/scripts/lucide-icons.min.js" as="script">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://imagedelivery.net" crossorigin>
    <title>{pageTitle}</title>
    <!-- Removed global.css stylesheet reference -->
    <!-- Individual pages now handle their own meta descriptions -->
    <meta name="keywords" content={pageKeywords}>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    
    <!-- Sitemap and Robots References -->
    <link rel="sitemap" type="application/xml" href="/sitemap.xml">
    
    <!-- Schema.org WebSite and Organization markup with proper schema properties -->
    <script type="application/ld+json" set:html={JSON.stringify({
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "Organization",
          "@id": "https://digitalvisibility.com/#organization",
          "name": "Digital Visibility",
          "legalName": "Digital Visibility Limited",
          "alternateName": ["Digital Visibility Limited", "Digital Visibility Ltd"],
          "url": "https://digitalvisibility.com",
          "slogan": "Get Discovered Everywhere with Supercharged Engine Optimization",
          "description": "Digital Visibility is Swansea's leading SEO agency specializing in Search Engine Optimization, Answer Engine Optimization (AEO), Generative Engine Optimization (GEO), and Search Brand Optimization (SBO). We help businesses get found on Google search and AI platforms like ChatGPT, Perplexity, and Microsoft Bing. Our comprehensive approach includes free high-converting websites, AI automations that pay for themselves, and flexible £40/hour services with no contracts. Serving businesses in Swansea, South Wales, across the UK, and globally.",
          "foundingDate": "2023-01-01",
          "founder": {
            "@type": "Person",
            "name": "Darran Goulding",
            "jobTitle": "CEO & Founder",
            "url": "https://digitalvisibility.com/about/darran-goulding/",
            "sameAs": [
              "https://www.linkedin.com/in/darrangoulding/",
              "https://x.com/DarranGoulding"
            ],
            "knowsAbout": [
              "Supercharged Engine Optimization",
              "AI Search Technology",
              "Business Strategy",
              "Digital Marketing"
            ],
            "alumniOf": {
              "name": "Swansea University"
            },
            "award": "Award-winning team",
            "funder": [
              {
                "name": "Swansea Council Business Funding",
                "url": "https://www.swansea.gov.uk/businessfunding"
              },
              {
                "name": "Royal Academy of Engineering",
                "url": "https://enterprisehub.raeng.org.uk/"
              }
            ]
          },
          "employee": {
            "@type": "QuantitativeValue",
            "minValue": 10,
            "maxValue": 25
          },
          "logo": {
            "@type": "ImageObject",
            "url": "https://digitalvisibility.com/digital-visibility-logo-f.png",
            "width": 180,
            "height": 60,
            "caption": "Digital Visibility Logo"
          },
          "image": {
            "@type": "ImageObject",
            "url": "https://imagedelivery.net/xUD9jGQuj6OKHFKJ8WGwXA/supercharged-seo-swansea/public",
            "width": 1200,
            "height": 630,
            "caption": "Supercharged Engine Optimization Services by Digital Visibility"
          },
          "address": {
            "@type": "PostalAddress",
            "streetAddress": "235 Peniel Green Road",
            "addressLocality": "Llansamlet",
            "addressRegion": "Swansea",
            "postalCode": "SA7 9BA",
            "addressCountry": "GB"
          },
          "areaServed": [
            {
              "name": "Swansea",
              "sameAs": "https://en.wikipedia.org/wiki/Swansea"
            },
            {
              "name": "Cardiff",
              "sameAs": "https://en.wikipedia.org/wiki/Cardiff"
            },
            {
              "name": "South Wales",
              "sameAs": "https://en.wikipedia.org/wiki/South_Wales"
            },
            {
              "name": "Wales",
              "sameAs": "https://en.wikipedia.org/wiki/Wales"
            },
            {
              "name": "United Kingdom",
              "sameAs": "https://en.wikipedia.org/wiki/United_Kingdom"
            },
            {
              "name": "International",
              "description": "Remote Supercharged Engine Optimization services available globally"
            }
          ],
          "award": "Award-winning team",
          "contactPoint": [
            {
              "@type": "ContactPoint",
              "telephone": "+44-01792-002497",
              "contactType": "Customer Support",
              "email": "support@digitalvisibility.com",
              "availableLanguage": ["English", "Welsh"],
              "hoursAvailable": {
                "@type": "OpeningHoursSpecification",
                "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
                "opens": "08:00",
                "closes": "20:00"
              }
            },
            {
              "telephone": "+44-07725-817197",
              "contactType": "Mobile/WhatsApp",
              "availableLanguage": ["English", "Welsh"]
            }
          ],
          "sameAs": [
            "https://www.facebook.com/people/Digital-Visibility/61572995410124/",
            "https://www.linkedin.com/company/digitalvisibilityuk/",
            "https://x.com/DigitalVisiUK",
            "https://www.instagram.com/digitalvisibilityuk/",
            "https://www.tiktok.com/@digitalvisibilityuk",
            "https://uk.pinterest.com/digitalvisibilityuk/"
          ],
          "knowsAbout": [
            "Supercharged Engine Optimization",
            "Local Search Optimization",
            "Business Automation",
            "AI Marketing Tools",
            "Free Website Development",
            "Conversion Rate Optimization",
            "Social Media Marketing",
            "Content Marketing",
            "Pay-Per-Click Advertising",
            "Mobile App Development",
            "E-commerce Solutions",
            "Search Engine Optimization (SEO)",
            "WordPress Development",
            "API Integration",
            "Business Analytics",
            "Answer Engine Optimization (AEO)",
            "Generative Engine Optimization (GEO)",
            "Search Brand Optimization (SBO)",
            "AI Search Engine Optimization",
            "ChatGPT Optimization",
            "Perplexity AI Optimization",
            "Microsoft Bing AI Optimization",
            "Digital Marketing Strategy"
          ],
          "memberOf": [
            {
              "name": "Swansea Business Club"
            },
            {
              "name": "Welsh Digital Marketing Association"
            }
          ]
        },
        {
          "@type": "LocalBusiness",
          "@id": "https://digitalvisibility.com/#localbusiness",
          "name": "Digital Visibility - Supercharged Engine Optimization",
          "alternateName": "Digital Visibility Swansea",
          "description": "Swansea's leading SEO agency specializing in Search Engine Optimization, Answer Engine Optimization (AEO), Generative Engine Optimization (GEO), and Search Brand Optimization (SBO). Expert AI search optimization for Google, ChatGPT, Perplexity, and Microsoft Bing serving businesses across South Wales.",
          "url": "https://digitalvisibility.com",
          "telephone": "+44-01792-002497",
          "email": "support@digitalvisibility.com",
          "priceRange": "£40-£2995",
          "currenciesAccepted": "GBP",
          "paymentAccepted": ["Cash", "Credit Card", "Bank Transfer", "Direct Debit"],
          "address": {
            "@type": "PostalAddress",
            "streetAddress": "235 Peniel Green Road",
            "addressLocality": "Llansamlet",
            "addressRegion": "Swansea",
            "postalCode": "SA7 9BA",
            "addressCountry": "GB"
          },
          "geo": {
            "@type": "GeoCoordinates",
            "latitude": 51.6214,
            "longitude": -3.9436
          },
          "areaServed": [
            {
              "name": "Swansea"
            },
            {
              "name": "South Wales"
            },
            {
              "name": "United Kingdom"
            }
          ],
          "openingHoursSpecification": {
            "@type": "OpeningHoursSpecification",
            "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
            "opens": "08:00",
            "closes": "20:00"
          },
          "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": 5.0,
            "reviewCount": 47,
            "bestRating": 5,
            "worstRating": 1
          }
        },
        {
          "@type": "WebPage",
          "@id": "https://digitalvisibility.com/#webpage",
          "url": "https://digitalvisibility.com/",
          "name": "SEO Services Swansea | Search Engine Optimization | AEO, GEO & SBO Expert | Digital Visibility",
          "description": "Revolutionary SEO+AEO+GEO+SBO strategy gets your business recommended by AI and ranked on search engines. Free website + automations that pay for themselves.",
          "inLanguage": "en-GB",
          "datePublished": "2025-04-17",
          "dateModified": "2025-06-23",
          "about": {
            "@id": "https://digitalvisibility.com/#organization"
          },
          "isPartOf": {
            "@id": "https://digitalvisibility.com/#website"
          },
          "primaryImageOfPage": {
            "@type": "ImageObject",
            "url": "https://imagedelivery.net/xUD9jGQuj6OKHFKJ8WGwXA/supercharged-seo-swansea/public",
            "width": 1200,
            "height": 630
          },
          "speakable": {
            "@type": "SpeakableSpecification",
            "cssSelector": ["h1", "h2", ".hero-description"]
          }
        },
        {
          "@type": "Service",
          "@id": "https://digitalvisibility.com/#supercharged-engine-optimization",
          "name": "Search Engine Optimization & AI Search Services",
          "alternateName": [
            "SEO Services Swansea",
            "Answer Engine Optimization AEO",
            "Generative Engine Optimization GEO",
            "Search Brand Optimization SBO",
            "AI Search Optimization",
            "Supercharged Engine Optimization"
          ],
          "description": "Comprehensive search optimization services combining traditional Search Engine Optimization (SEO), trending Answer Engine Optimization (AEO), Generative Engine Optimization (GEO), and Search Brand Optimization (SBO). Get your Swansea business found on Google, AI platforms like ChatGPT, Perplexity, and Microsoft Bing AI search.",
          "serviceType": "Digital Marketing",
          "category": ["SEO", "AEO", "GEO", "SBO", "AI Search Optimization", "Digital Marketing"],
          "areaServed": [
            {
              "name": "Swansea"
            },
            {
              "name": "South Wales"
            },
            {
              "name": "United Kingdom"
            }
          ],
          "hasOfferCatalog": {
            "@type": "OfferCatalog",
            "name": "Supercharged Engine Optimization Services",
            "itemListElement": [
              {
                "itemOffered": {
                  "name": "Search Engine Optimization (SEO)",
                  "description": "Traditional search engine optimization for Google, Bing, and other search engines"
                }
              },
              {
                "itemOffered": {
                  "name": "Answer Engine Optimization (AEO)",
                  "description": "Optimization for AI platforms like ChatGPT, Perplexity, and AI search assistants"
                }
              },
              {
                "itemOffered": {
                  "name": "Generative Engine Optimization (GEO)",
                  "description": "Optimization for AI-generated content and recommendations"
                }
              },
              {
                "itemOffered": {
                  "name": "Search Brand Optimization (SBO)",
                  "description": "Brand visibility optimization across all search platforms and AI systems"
                }
              },
              {
                "itemOffered": {
                  "name": "Free Website Development",
                  "description": "High-converting website worth £2,995 included with optimization services"
                }
              },
              {
                "itemOffered": {
                  "name": "AI Business Automation",
                  "description": "Smart automations that handle marketing, operations, and customer service"
                }
              }
            ]
          },
          "offers": {
            "@type": "Offer",
            "description": "Hourly rate for Supercharged Engine Optimization services, no contracts required",
            "price": "40.00",
            "priceCurrency": "GBP",
            "availability": "https://schema.org/InStock",
            "validFrom": "2023-01-01",
            "url": "https://digitalvisibility.com/",
            "priceSpecification": {
              "@type": "UnitPriceSpecification",
              "price": 40.00,
              "priceCurrency": "GBP",
              "unitText": "per hour"
            },
            "seller": {
              "@id": "https://digitalvisibility.com/#organization"
            }
          },
          "provider": {
            "@id": "https://digitalvisibility.com/#organization"
          }
        },
        {
          "@type": "WebSite",
          "@id": "https://digitalvisibility.com/#website",
          "url": "https://digitalvisibility.com",
          "name": "Digital Visibility - Supercharged Engine Optimization",
          "description": "Swansea's leading Supercharged Engine Optimization agency. Revolutionary SEO+AEO+GEO+SBO strategies to get your business discovered everywhere.",
          "inLanguage": "en-GB",
          "publisher": {
            "@id": "https://digitalvisibility.com/#organization"
          },
          "potentialAction": {
            "@type": "SearchAction",
            "target": {
              "@type": "EntryPoint",
              "urlTemplate": "https://digitalvisibility.com/search?q={search_term_string}"
            },
            "query-input": "required name=search_term_string"
          }
        }
      ]
    })}>
    </script>
    <slot name="head"/>
</head>
<body>
    <slot name="nav"/>
    
    <main>
        <slot />
    </main>

    <slot name="footer"/>

    <!-- Either add is:inline or remove if not yet created -->
    <!-- <script is:inline src="/scripts/app.js"></script> -->
    <script defer src="/scripts/lucide-icons.min.js"></script>
    <script defer src="/scripts/facebook-conversions.js"></script>
    <script is:inline>
        // Optimize icon initialization to reduce LCP time
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof window.lucide !== 'undefined') {
                // Create above-the-fold icons immediately
                window.lucide.createIcons();
                
                // Optimize by removing unused icons
                var unusedIcons = document.querySelectorAll('.icon:not(.essential-icon)'); 
                unusedIcons.forEach(function(icon) {
                    if (!isInViewport(icon)) {
                        icon.setAttribute('data-lazy-load', 'true');
                    }
                });
            }
        });
        
        // Helper function to check if element is in viewport
        function isInViewport(element) {
            var rect = element.getBoundingClientRect();
            return (
                rect.top >= 0 &&
                rect.left >= 0 &&
                rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                rect.right <= (window.innerWidth || document.documentElement.clientWidth)
            );
        }
    </script>
    <slot name="scripts"/>
</body>
</html>
